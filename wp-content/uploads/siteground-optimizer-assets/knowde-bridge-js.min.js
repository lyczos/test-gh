var KNOWDE_BRIDGE_ORIGIN=findGetParameter('knowde_bridge_origin');var KNOWDE_SITE_URL=document.location.origin;function getDocHeight(doc){doc=doc||document;var body=doc.body,html=doc.documentElement;return body.scrollHeight;}
function sendDocHeightMsg(e){var docHeight=getDocHeight();if(!parent){return;}
window.parent.postMessage({'docHeight':docHeight},KNOWDE_BRIDGE_ORIGIN||'https://www.knowde.com');}
function findGetParameter(parameterName){var result=null,tmp=[];location.search.substr(1).split("&").forEach(function(item){tmp=item.split("=");if(tmp[0]===parameterName)result=decodeURIComponent(tmp[1]);});return result;}
function removeWpHTMLMargin(){if(KNOWDE_BRIDGE_ORIGIN){addNewStyle('#wpadminbar {display:none !important;}');addNewStyle('html {margin-top:0 !important;}');addNewStyle('html, body {width: 1px; min-width: 100%;}');}}
function addNewStyle(newStyle){var styleElement=document.getElementById('styles_js');if(!styleElement){styleElement=document.createElement('style');styleElement.type='text/css';styleElement.id='styles_js';document.getElementsByTagName('head')[0].appendChild(styleElement);}
styleElement.appendChild(document.createTextNode(newStyle));}
function handleLinks(){var allLinks=Array.from(document.querySelectorAll("a"));allLinks.filter(function(link){return link.href.includes('#')===false;}).forEach(function(link){link.target='_blank';});var pagesKnowdeComLinks=Array.from(document.querySelectorAll("a[href^='"+KNOWDE_SITE_URL+"']"));pagesKnowdeComLinks.filter(function(link){return link.href.includes('#')===false;}).forEach(function(link){link.href+="?knowde_bridge_origin="+KNOWDE_BRIDGE_ORIGIN;link.target="_self";});var lonzaPages=pagesKnowdeComLinks.filter(function(link){return /^\/lonza/.test(link.pathname);});lonzaPages.forEach(function(link){link.addEventListener("click",function(ev){window.parent.postMessage({'route':'/companies'+link.pathname},KNOWDE_BRIDGE_ORIGIN||'https://www.knowde.com');ev.preventDefault();});});var knowdeAppLinks=Array.from(document.querySelectorAll("a[href^='https://www.knowde.com']"));knowdeAppLinks.forEach(function(link){link.addEventListener("click",function(ev){window.parent.postMessage({'route':link.pathname,'search':link.search},KNOWDE_BRIDGE_ORIGIN||'https://www.knowde.com');ev.preventDefault();});});}
if(KNOWDE_BRIDGE_ORIGIN){handleLinks();}
if(window.addEventListener){window.addEventListener('load',removeWpHTMLMargin,false);window.addEventListener('load',sendDocHeightMsg,false);window.addEventListener('resize',sendDocHeightMsg,false);document.addEventListener("DOMContentLoaded",function(event){setTimeout(function(){sendDocHeightMsg();},2000)});}else if(window.attachEvent){window.attachEvent('onload',removeWpHTMLMargin);window.attachEvent('onload',sendDocHeightMsg);window.attachEvent('onresize',sendDocHeightMsg);}